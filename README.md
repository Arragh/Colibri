# üê• Colibri üê•
API Gateway –Ω–∞ –±–∞–∑–µ ASP.NET 10 - –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º.

## üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
1) –°–≤–æ—è Trie-based —Å–∏—Å—Ç–µ–º–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö –∏ –ø–ª–æ—Å–∫–∏—Ö –º–∞—Å—Å–∏–≤–∞—Ö.
2) –î–æ 16 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –º–∞—Ä—à—Ä—É—Ç–µ.
3) –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤: http, websocket.
4) –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã.
5) –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ –º–µ—Ç–æ–¥–æ–≤.
6) –ü–æ–≤—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ.
7) –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏: Round-Robin, Random.
8) –ì–æ—Ä—è—á–∞—è –∑–∞–º–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥–∞.
9) Circuit Breaker.

## üìù –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
```json
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "Colibri": {
    "Authorization": {
    "Routing": {
      "Clusters": [
        {
          "Enabled": true,
          "ClusterId": "Cluster1", // –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–ª–∞—Å—Ç–µ—Ä–∞, –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º
          "Protocol": "http", // –ü–æ–∫–∞ —Ç–æ–ª—å–∫–æ http, websocket –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
          "Prefix": "/cluster1", // –ü—Ä–µ—Ñ–∏–∫—Å –º–∞—Ä—à—Ä—É—Ç–∞ (http://cluster1/service1/method1)
          "UsePrefix": true, // –ú–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–µ—Ñ–∏–∫—Å–∞ –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–æ–≤
          "Hosts": [ "http://192.168.1.100:6000", "http://192.168.1.102:6002" ],
          "Retry": {
            "Enabled": true,
            "Attempts": 3 // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫
          },
          "LoadBalancing": {
            "Enabled": true,
            "Type": "RND" // RND - random, RR - round-robin
          },
          "CircuitBreaker": {
            "Enabled": true,
            "Failures": 5, // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –ø–æ–¥—Ä—è–¥ –¥–ª—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è
            "Timeout": 30 // –°–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –Ω–∞ —Ö–æ—Å—Ç –Ω–µ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –∑–∞–ø—Ä–æ—Å—ã
          }
        }
      ],
      "Routes": [
        {
          "ClusterId": "Cluster1", // –ü—Ä–∞–≤–∏–ª–∞ –∫–∞–∫–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
          "Methods": [ "GET" ],
          "UpstreamPattern": "/service1/method1", // –í–Ω–µ—à–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç
          "DownstreamPattern": "/method1" // –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç
        },
        {
          "ClusterId": "Cluster1",
          "Methods": [ "POST", "DELETE" ], // –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç–æ–¥–æ–≤
          "UpstreamPattern": "/service1/method2/{id}", // –í –º–∞—Ä—à—Ä—É—Ç –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ 16 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
          "DownstreamPattern": "/method2/{id}" // –≠—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±—É–¥—É—Ç –ø–µ—Ä–µ–¥–∞–Ω—ã –≤ –∑–∞–ø—Ä–æ—Å –∫–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º—É —Å–µ—Ä–≤–∏—Å—É
        }
      ]
    }
  }
}
```

## ‚ùì –ü—Ä–µ–¥–≤–æ—Å—Ö–∏—â–∞—è –≤–æ–ø—Ä–æ—Å—ã:
1) "–ü–æ—á–µ–º—É –Ω–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ https?" - –ü–æ—Ç–æ–º—É —á—Ç–æ https –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ nginx –∏–ª–∏ –µ–≥–æ –∞–Ω–∞–ª–æ–≥–∞—Ö. –ù–µ—Ç —Å–º—ã—Å–ª–∞ –≤–µ—à–∞—Ç—å —ç—Ç—É –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ API Gateway.